<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Plaza en Realidad Virtual</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <style>
      /* botones visibles sobre la escena */
      #volver, #perfil, #nivel {
        position: fixed;
        top: 10px;
        z-index: 10;
        padding: 10px 14px;
        font-size: 14px;
        border-radius: 8px;
        border: none;
        cursor: pointer;
        background: rgba(0,0,0,0.6);
        color: #fff;
      }
      #perfil { left: 150px; }
      #volver { left: 300px; }
      #perfil { left: 50px; }
    </style>
  </head>
  <body>
    <!-- Botones -->
    <button id="volver">⬅ Volver (restaurar vista + cambiar imagen)</button>
     <button id="perfil">⬅ Perfil (ir al perfil)</button>
     <button id="nivel">⬅ Seleccionar nivel</button> 
     
    <a-scene>
      <!-- Preload de imágenes -->
      <a-assets>
        <img id="errorImg" src="error.png" alt="error">
        <img id="inicioImg" src="inicio.png" alt="inicio">
        <img id="perfilImg" src="perfil.png" alt="perfil">
      </a-assets>

      <!-- Cielo y suelo -->
      <a-sky color="#87CEEB"></a-sky>
      <a-plane color="#4CAF50" height="100" width="100" rotation="-90 0 0"></a-plane>

      <!-- Fuente -->
      <a-cylinder position="0 0.25 0" radius="1.5" height="0.1" color="#2196F3"></a-cylinder>

      <!-- Imagen (usa el asset precargado) -->
      <a-plane id="miImagen"
        material="src: #errorImg; transparent: true; opacity: 1"
        position="0 2.20 0"
        width="2"
        height="3.6"
        rotation="0 0 0">
      </a-plane>

      <!-- Caminos -->
      <a-plane position="0 0.01 0" rotation="-90 0 0" width="1" height="20" color="#9E9E9E"></a-plane>
      <a-plane position="0 0.01 0" rotation="-90 90 0" width="1" height="20" color="#9E9E9E"></a-plane>

      <!-- Árboles (igual que tu código) -->
      <a-entity>
        <a-cylinder position="4 1 -4" radius="0.2" height="2" color="#8B4513"></a-cylinder>
        <a-sphere position="4 2.5 -4" radius="1" color="#228B22"></a-sphere>

        <a-cylinder position="-4 1 -4" radius="0.2" height="2" color="#8B4513"></a-cylinder>
        <a-sphere position="-4 2.5 -4" radius="1" color="#228B22"></a-sphere>

        <a-cylinder position="2 1 -2" radius="0.2" height="2" color="#8B4513"></a-cylinder>
        <a-sphere position="2 2.5 -2" radius="1" color="#228B22"></a-sphere>

        <a-cylinder position="-2 1 -2" radius="0.2" height="2" color="#8B4513"></a-cylinder>
        <a-sphere position="-2 2.5 -2" radius="1" color="#228B22"></a-sphere>

        <a-cylinder position="4 1 4" radius="0.2" height="2" color="#8B4513"></a-cylinder>
        <a-sphere position="4 2.5 4" radius="1" color="#228B22"></a-sphere>

        <a-cylinder position="-4 1 4" radius="0.2" height="2" color="#8B4513"></a-cylinder>
        <a-sphere position="-4 2.5 4" radius="1" color="#228B22"></a-sphere>
      </a-entity>

      <!-- Cámara con id para poder manipularla desde JS -->
      <a-entity id="cam" camera look-controls position="0 1.6 4"></a-entity>
    </a-scene>

    <script>
      // Esperamos a DOMContentLoaded para asegurar que los elementos existen
      document.addEventListener('DOMContentLoaded', () => {
        const cam = document.getElementById('cam');
        const img = document.getElementById('miImagen');
        const volverBtn = document.getElementById('volver');


        // guardamos la posición inicial de la cámara
        const posInicial = cam.getAttribute('position');

        volverBtn.addEventListener('click', () => {
          // Restaurar posición de la cámara
          cam.setAttribute('position', posInicial);

          // Cambiar la textura de la imagen (usa el asset con id #inicioImg)
          img.setAttribute('material', 'src: #inicioImg; transparent: true; opacity: 1');

          // (opcional) pequeña animación para hacer evidente el cambio
          img.setAttribute('animation__pop', 'property: scale; to: 1.05 1.05 1; dur: 150; dir: alternate; loop: 1');
        });

      
      });
    </script>
  </body>
</html>